# 实验网站更新说明

## 更新日期
基于新版实验方案的系统更新

## 主要更新内容

### 1. 实验流程调整 ✅
- ✅ 取消"3个部分"划分，统一为1个阶段，共12个试次（S1-S12）
- ✅ 取消中间休息间隔
- ✅ 支持"上一题"和"下一题"功能，不限制答题时长
- ✅ 试次顺序保持随机化
- ✅ 保留完整流程：知情同意→实验说明→练习试次→正式实验→后测问卷→致谢

### 2. 刺激材料管理 ✅
- ✅ 样品管理改为按"样品编号（S1-S12）"上传
- ✅ 每个样品编号显示对应的色彩特征提示（如"S1：暖色调-高饱和-浅色"）
- ✅ 取消"色调/明度/饱和度"分组管理
- ✅ 支持预览每个样品的图片

### 3. 评分题项更新 ✅
- ✅ 更新为5个新的特质形容词：
  - 社交的（对应外向性）
  - 友好地（对应宜人性）
  - 有条理的（对应尽责性）
  - 焦虑的（对应神经质）
  - 创造性的（对应开放性）
- ✅ 仍使用7点Likert量表（1=完全不符合，7=完全符合）
- ✅ 题项可在后台编辑

### 4. 实验界面调整 ✅
- ✅ 删除情境描述，正式实验仅呈现样品图片
- ✅ 更新实验说明，强调"凭直觉作答，无需过度思考"
- ✅ 移除计时器（正式实验不限制答题时长）
- ✅ 添加"上一题"按钮（正式实验可见）

### 5. 数据收集格式 ✅
- ✅ 记录样品编号（S1-S12）
- ✅ 记录每个样品的5个题项得分
- ✅ 记录单个样品答题时长（秒）
- ✅ 记录整体实验完成时长
- ✅ 排除练习数据，仅记录正式实验数据

### 6. 数据导出格式 ✅
- ✅ 字段顺序：被试ID→性别→年龄→样品编号1→5个题项得分→答题时长→...→样品编号12→...→总时长→注意力检查→有效性标记
- ✅ 按S1-S12顺序组织数据
- ✅ 支持CSV和Excel格式导出

### 7. 无效数据判定 ✅
- ✅ 最短完成时长：默认8分钟（可在后台修改）
- ✅ 连续同分判定：连续3个及以上试次的所有题项同分（可在后台修改阈值）
- ✅ 注意力检查：必须通过2道注意力检查题

### 8. 后测问卷更新 ✅
- ✅ 注意力检查题改为2道与样品相关的题目（可后台编辑）
- ✅ 开放性问题改为2个：
  - 问题1：你觉得本次实验主要在研究什么？
  - 问题2：服装色彩是否是你判断角色人格的关键因素？为什么？

### 9. 管理员后台更新 ✅
- ✅ 素材管理界面改为按S1-S12逐一上传
- ✅ 每个样品显示色彩特征提示
- ✅ 删除情境描述、图片展示时长、休息间隔配置
- ✅ 新增"连续同分试次阈值"配置
- ✅ 更新开放性问题配置（2个问题）
- ✅ 更新注意力检查题配置

## 技术实现要点

1. **数据存储结构**：
   - 图片存储：`images.samples = {S1: {...}, S2: {...}, ...}`
   - 试次数据：包含`sampleId`字段，不再使用`group`字段

2. **试次随机化**：
   - 使用Fisher-Yates洗牌算法
   - 为每个被试生成唯一的随机顺序

3. **数据验证**：
   - 连续同分判定：检查连续N个试次，每个试次的所有题项是否相同

4. **向后兼容**：
   - 旧数据格式与新格式兼容
   - 首次运行会自动初始化新配置

## 使用说明

1. **首次使用**：
   - 访问`admin.html`配置实验
   - 按S1-S12顺序上传样品图片
   - 检查并保存配置

2. **开始实验**：
   - 访问`index.html`开始实验
   - 被试完成12个试次（随机顺序）
   - 数据自动保存

3. **导出数据**：
   - 在管理员后台的"数据管理"标签中导出
   - 支持按日期范围筛选
   - 导出格式符合新版要求

## 注意事项

- ⚠️ 首次使用前必须先上传S1-S12的所有样品图片
- ⚠️ 旧版数据格式已不兼容，建议清空旧数据后重新开始
- 💡 数据存储在浏览器localStorage中，请定期导出备份
- 💡 样品图片建议大小不超过2MB，确保加载速度

## 文件变更清单

### 修改的文件：
- `js/config.js` - 配置文件，更新题项、样品数量、注意力检查题等
- `js/main.js` - 主实验逻辑，重写实验流程
- `js/data.js` - 数据管理，更新存储格式和导出格式
- `js/admin.js` - 管理员后台逻辑，更新素材管理和配置管理
- `index.html` - 主界面，删除情境描述、添加上一题按钮
- `admin.html` - 管理员界面，更新素材管理和配置界面
- `css/style.css` - 样式更新
- `css/admin.css` - 管理员样式更新

### 新增的文件：
- `更新说明.md` - 本文件

---

如有问题或需要进一步调整，请查看代码注释或联系开发者。


